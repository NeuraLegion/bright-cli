# nexploit-cli

NexPloit-CLI is a [CLI](https://en.wikipedia.org/wiki/Command-line_interface)
tool that can create HTTP Archive (HAR) files from mock requests generated by 
unit-testing and other local automations. These HAR files are required to run 
scans using NeuraLegions solutions (Such as NexPloit). 
NexPloit-CLI supports the latest Fetch API and provides additional 
features to help you generate HAR files during CI/CD flows with ease.

Some NexPloit-CLI features:

* Supports FormData, URLSearchParams, JSON, etc.
* Configuration in JSON / XML / YML / JS formats
* Handy schema declaration in separate mock files


## Quick Start

Starting with NexPloit-CLI is easy.

First, install NexPloit-CLI globally:


```bash
$ npm install nexploit-cli -g
```

Next, go to the directory of your project and run the command:

```bash
$ nexploit-cli -h
```

If you already have a prepared mock file, you can generate a HAR file with the following command:

```bash
$ nexploit-cli archive:generate \
    --mockfile .nexmock \
    --archive archive.har \
    --target https://nexploit.app/ \
    --header "authorization: Bearer eyJhbGciOiJIUzUxM"
```

Where `mockfile` is the path to your mockfile and `archive` is the path to save the HAR file to.

The archive:generate command will generate a new archive at the archive path:
```
Project
├── .nexploitrc       // CLI configuration
├── .nexmock          // your mock requests
└── archive.har       // generated HAR file
```

> In addition, you can specify authorization or authentication headers and a base url for the tested application.


During the creating of the archive, you can edit the `.nexploitrc.json` file and add your own options, such as:
```json
{
   "api-key": "fdge44df.tdfeswerfwsttsdrest",
   "target": "https://example.com/",
   "host-filter": ["https://example.com/"]
}
```

> You can also declare one of following .nexploitrc, .nexploitrc.json, .nexploitrc.yml, .nexploitrc.yaml, nexploit.config.js files.


However, most of the time you'll only need to configure api-key, target and maybe host-filter options.

Once the configuration is completed, run a new scan with:

```bash
$ nexploit-cli scan:run \
      --name ScanName \
      --archive archive.har \
      --protocol http \
      --api-key fdge44df.tdfeswerfwsttsdrest
```

That's it, a new scan will start (or queued) in [NexPloit](https://nexploit.app).
You can continue to work with this scan in application.

**Note**: If you configure integration with `Jenkins`, `Circle CI` or `Travis CI` you might want to link the scan to the build, so that it will stop after finding some issue.

```bash
$ nexploit-cli scan:run \
      --name ScanName \
      --archive archive.har \
      --protocol http \
      --api-key fdge44df.tdfeswerfwsttsdrest
      --service circleci
      --build-number 1
      --project YourProject
      --vcs github
```
